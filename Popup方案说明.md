# TextInputæ›¿æ¢ä¸ºPopupæ–¹æ¡ˆ

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

**æ ¸å¿ƒæ€è·¯**: å®Œå…¨ç§»é™¤ä¸»ç•Œé¢ä¸­çš„TextInputï¼Œæ”¹ç”¨Popupå¼¹çª—æ–¹å¼è¾“å…¥Tokenï¼Œé¿å…TextInputé˜»å¡ä¸»ç•Œé¢ã€‚

## âœ… å·²å®æ–½çš„æ”¹åŠ¨

### 1. ç§»é™¤ä¸»ç•Œé¢çš„TextInput
- **ä¿®æ”¹å‰**: åœ¨ä¸»ç•Œé¢ç›´æ¥åˆ›å»ºTextInputï¼Œå¯¼è‡´åº”ç”¨å¡ä½
- **ä¿®æ”¹å**: ä¸»ç•Œé¢ä¸åˆ›å»ºTextInputï¼Œå®Œå…¨é¿å…é˜»å¡é—®é¢˜

### 2. ä½¿ç”¨Labelæ˜¾ç¤ºToken
- åœ¨ä¸»ç•Œé¢æ˜¾ç¤ºå½“å‰Tokenï¼ˆä»é…ç½®è¯»å–ï¼‰
- å¦‚æœæœªè®¾ç½®ï¼Œæ˜¾ç¤ºæç¤ºæ–‡å­—ï¼š"æœªè®¾ç½®ï¼ˆç‚¹å‡»ä¸‹æ–¹æŒ‰é’®è¾“å…¥ï¼‰"
- Tokenæ˜¾ç¤ºä¸ºå‰20ä¸ªå­—ç¬¦ + "..."

### 3. ä½¿ç”¨Popupå¼¹çª—è¾“å…¥
- æ·»åŠ "è¾“å…¥/æ›´æ–°Token"æŒ‰é’®
- ç‚¹å‡»æŒ‰é’®åå¼¹å‡ºPopupçª—å£
- åœ¨Popupä¸­åˆ›å»ºTextInputï¼ˆæ­¤æ—¶ä¸»ç•Œé¢å·²å®Œå…¨æ˜¾ç¤ºï¼Œä¸ä¼šé˜»å¡ï¼‰
- PopupåŒ…å«ï¼š
  - æ ‡é¢˜Label
  - TextInputè¾“å…¥æ¡†
  - "ä¿å­˜"å’Œ"å–æ¶ˆ"æŒ‰é’®

### 4. ä¼˜åŒ–Tokenè·å–é€»è¾‘
- `start_service()`: ä»é…ç½®è¯»å–Tokenï¼Œä¸å†ä¾èµ–TextInput
- `on_token_captured()`: æ›´æ–°Tokenæ˜¾ç¤ºLabelï¼Œä¸å†æ›´æ–°TextInput
- `_save_token_internal()`: ç»Ÿä¸€çš„Tokenä¿å­˜æ–¹æ³•

## ğŸ“‹ ä¸»è¦ä»£ç æ”¹åŠ¨

### ä¸»ç•Œé¢UIï¼ˆbuild_uiæ–¹æ³•ï¼‰

```python
# ä¿®æ”¹å‰ï¼šç›´æ¥åˆ›å»ºTextInputï¼ˆä¼šå¡ä½ï¼‰
self.token_input = TextInput(...)
self.add_widget(self.token_input)

# ä¿®æ”¹åï¼šä½¿ç”¨Labelæ˜¾ç¤º + æŒ‰é’®å¼¹å‡ºPopup
self.token_display = Label(text=current_token, ...)
self.add_widget(self.token_display)

input_token_btn = Button(
    text='è¾“å…¥/æ›´æ–°Token',
    on_press=self.show_token_input_popup,
    ...
)
self.add_widget(input_token_btn)
```

### æ–°å¢Popupæ–¹æ³•

```python
def show_token_input_popup(self, instance):
    """æ˜¾ç¤ºTokenè¾“å…¥å¼¹çª—"""
    content = BoxLayout(orientation='vertical', spacing=10, padding=10)
    
    # æ ‡é¢˜
    title_label = Label(text='è¯·è¾“å…¥Token:', ...)
    content.add_widget(title_label)
    
    # TextInputï¼ˆåœ¨Popupä¸­åˆ›å»ºï¼Œä¸ä¼šé˜»å¡ä¸»ç•Œé¢ï¼‰
    token_input = TextInput(...)
    content.add_widget(token_input)
    
    # ä¿å­˜å’Œå–æ¶ˆæŒ‰é’®
    save_btn = Button(text='ä¿å­˜', on_press=save_token_from_popup)
    cancel_btn = Button(text='å–æ¶ˆ', on_press=lambda btn: popup.dismiss())
    
    # åˆ›å»ºå¹¶æ˜¾ç¤ºPopup
    popup = Popup(
        title='è¾“å…¥Token',
        content=content,
        size_hint=(0.8, 0.4),
        auto_dismiss=False
    )
    popup.open()
```

## ğŸš€ ä¼˜åŠ¿

1. **ä¸»ç•Œé¢ä¸ä¼šå¡ä½**: TextInputä¸åœ¨ä¸»ç•Œé¢åˆ›å»ºï¼Œåº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
2. **ç”¨æˆ·ä½“éªŒæ›´å¥½**: ç‚¹å‡»æŒ‰é’®æ‰å¼¹å‡ºè¾“å…¥æ¡†ï¼Œç•Œé¢æ›´ç®€æ´
3. **é”™è¯¯å¤„ç†æ›´ä¼˜é›…**: å³ä½¿Popupä¸­çš„TextInputåˆ›å»ºå¤±è´¥ï¼Œä¸»ç•Œé¢ä»ç„¶æ­£å¸¸
4. **åŠŸèƒ½å®Œæ•´**: æ‰€æœ‰åŠŸèƒ½éƒ½ä¿ç•™ï¼Œåªæ˜¯è¾“å…¥æ–¹å¼æ”¹å˜

## ğŸ“Š é¢„æœŸæ•ˆæœ

### ä¸»ç•Œé¢æ˜¾ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æŠ¢å•åŠ©æ‰‹            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ€: æœªå¯åŠ¨            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å½“å‰Token:              â”‚
â”‚ abc123...               â”‚
â”‚ [è¾“å…¥/æ›´æ–°Token]        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å¯åŠ¨æŠ¢å•] [åœæ­¢]       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ VPNè‡ªåŠ¨æŠ“åŒ…: [å¼€å…³]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¿è¡Œæ—¥å¿—:               â”‚
â”‚ ...                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç‚¹å‡»"è¾“å…¥/æ›´æ–°Token"å
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     è¾“å…¥Token           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯·è¾“å…¥Token:            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ [ä¿å­˜] [å–æ¶ˆ]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” è°ƒè¯•æ—¥å¿—

æ–°çš„æ—¥å¿—ä¼šæ˜¾ç¤ºï¼š
```
   åˆ›å»ºTokenæ˜¾ç¤º...
   âœ… token_labelåˆ›å»ºå®Œæˆ
   âœ… token_labelæ·»åŠ å®Œæˆ
   åˆ›å»ºTokenæ˜¾ç¤ºLabel...
   âœ… token_displayåˆ›å»ºå®Œæˆ
   âœ… token_displayæ·»åŠ å®Œæˆ
   åˆ›å»ºè¾“å…¥TokenæŒ‰é’®...
   âœ… input_token_btnåˆ›å»ºå®Œæˆ
   âœ… input_token_btnæ·»åŠ å®Œæˆ
   âš ï¸ ä¸åœ¨ä¸»ç•Œé¢åˆ›å»ºTextInputï¼Œä½¿ç”¨Popupæ–¹å¼
   ...
   âœ… build_ui() æ‰€æœ‰ç»„ä»¶åˆ›å»ºå®Œæˆ
```

å½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼š
```
ğŸ”§ æ˜¾ç¤ºTokenè¾“å…¥å¼¹çª—...
   åœ¨Popupä¸­åˆ›å»ºTextInput...
   âœ… Popupä¸­çš„TextInputåˆ›å»ºæˆåŠŸ
   âœ… Tokenè¾“å…¥å¼¹çª—å·²æ˜¾ç¤º
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Popupä¸­çš„TextInput**: å¦‚æœPopupä¸­çš„TextInputä»ç„¶åˆ›å»ºå¤±è´¥ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œä½†ä¸»ç•Œé¢ä¸å—å½±å“
2. **Tokenæ˜¾ç¤º**: Tokenåªæ˜¾ç¤ºå‰20ä¸ªå­—ç¬¦ï¼Œé¿å…ç•Œé¢è¿‡é•¿
3. **é…ç½®è¯»å–**: å¯åŠ¨æ—¶ä»é…ç½®è¯»å–Tokenå¹¶æ˜¾ç¤º
4. **VPNè‡ªåŠ¨æ›´æ–°**: VPNæ•è·åˆ°Tokenåä¼šè‡ªåŠ¨æ›´æ–°æ˜¾ç¤º

## ğŸ¯ éªŒè¯æ­¥éª¤

1. âœ… åº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨ï¼Œä¸å†é»‘å±
2. âœ… ä¸»ç•Œé¢æ‰€æœ‰ç»„ä»¶æ­£å¸¸æ˜¾ç¤º
3. âœ… Tokenæ˜¾ç¤ºLabelæ­£å¸¸æ˜¾ç¤ºï¼ˆä»é…ç½®è¯»å–æˆ–æ˜¾ç¤ºæç¤ºï¼‰
4. âœ… ç‚¹å‡»"è¾“å…¥/æ›´æ–°Token"æŒ‰é’®èƒ½å¼¹å‡ºPopup
5. âœ… Popupä¸­çš„TextInputèƒ½æ­£å¸¸åˆ›å»ºå’Œè¾“å…¥
6. âœ… ä¿å­˜Tokenåï¼Œä¸»ç•Œé¢æ˜¾ç¤ºæ›´æ–°
7. âœ… VPNæ•è·Tokenåï¼Œä¸»ç•Œé¢æ˜¾ç¤ºè‡ªåŠ¨æ›´æ–°

## ğŸ”— ç›¸å…³æ–‡æ¡£

- `TextInputä¿®å¤è¯´æ˜.md` - ç¬¬ä¸€æ¬¡ä¿®å¤æ–¹æ¡ˆ
- `TextInputä¿®å¤æ–¹æ¡ˆ2.md` - ç¬¬äºŒæ¬¡ä¿®å¤æ–¹æ¡ˆ
- `UIæ„å»ºè°ƒè¯•è¯´æ˜.md` - UIæ„å»ºçš„è¯¦ç»†è°ƒè¯•è¯´æ˜

## ğŸ’¡ æŠ€æœ¯è¯´æ˜

### ä¸ºä»€ä¹ˆPopupæ–¹æ¡ˆæ›´å¥½ï¼Ÿ

1. **å»¶è¿Ÿåˆ›å»º**: TextInputåœ¨ç”¨æˆ·éœ€è¦æ—¶æ‰åˆ›å»ºï¼Œæ­¤æ—¶ä¸»ç•Œé¢å·²å®Œå…¨æ˜¾ç¤º
2. **ç‹¬ç«‹çª—å£**: Popupæ˜¯ç‹¬ç«‹çš„çª—å£ï¼Œä¸ä¼šå½±å“ä¸»ç•Œé¢çš„æ¸²æŸ“
3. **é”™è¯¯éš”ç¦»**: å³ä½¿Popupä¸­çš„TextInputå¤±è´¥ï¼Œä¸»ç•Œé¢ä»ç„¶å¯ç”¨
4. **ç”¨æˆ·ä½“éªŒ**: ç‚¹å‡»æŒ‰é’®æ‰è¾“å…¥ï¼Œç•Œé¢æ›´ç®€æ´

### å¦‚æœPopupä¸­çš„TextInputä»ç„¶å¤±è´¥

å¯ä»¥è€ƒè™‘ï¼š
1. ä½¿ç”¨AndroidåŸç”Ÿçš„è¾“å…¥å¯¹è¯æ¡†ï¼ˆéœ€è¦Javaä»£ç ï¼‰
2. ä½¿ç”¨Kivyçš„å…¶ä»–è¾“å…¥ç»„ä»¶
3. å®Œå…¨ä¾èµ–VPNè‡ªåŠ¨æŠ“å–ï¼Œä¸æä¾›æ‰‹åŠ¨è¾“å…¥

