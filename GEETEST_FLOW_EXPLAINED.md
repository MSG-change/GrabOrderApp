# GeetestéªŒè¯æµç¨‹è¯¦è§£

## ğŸ” æ‚¨çš„é—®é¢˜è§£ç­”

### é—®é¢˜1: callbackæ˜¯ä»€ä¹ˆï¼Ÿ

`callback=geetest_1762710939565` æ˜¯**JSONPå›è°ƒå‡½æ•°å**ï¼Œç”¨äºæµè§ˆå™¨è·¨åŸŸè¯·æ±‚ã€‚

**åœ¨æ‚¨çš„æŠ¢å•APPä¸­ï¼Œä¸éœ€è¦callbackå‚æ•°ï¼**å› ä¸ºï¼š
- æµè§ˆå™¨éœ€è¦JSONPæ¥è·¨åŸŸ
- æ‚¨çš„APPæ˜¯ç›´æ¥HTTPè¯·æ±‚ï¼Œä¸éœ€è¦JSONP
- æœåŠ¡å™¨ä¼šè¿”å›çº¯JSONï¼ˆå»æ‰æ‹¬å·ï¼‰

### é—®é¢˜2: æŠ¢å•æ—¶å¦‚ä½•æºå¸¦éªŒè¯ç»“æœï¼Ÿ

## ğŸ“Š å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬1æ­¥: ç”¨æˆ·ç‚¹å‡»æŠ¢å•                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬2æ­¥: å‘é€æŠ¢å•è¯·æ±‚ï¼ˆä¸å¸¦éªŒè¯ï¼‰                                  â”‚
â”‚                                                                   â”‚
â”‚ POST /gate/app-api/club/order/grabAnOrder/v1                    â”‚
â”‚ {                                                                 â”‚
â”‚   "orderId": "3308987"                                           â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬3æ­¥: æœåŠ¡å™¨è¿”å›éœ€è¦éªŒè¯                                        â”‚
â”‚                                                                   â”‚
â”‚ {                                                                 â”‚
â”‚   "code": 1001,                                                  â”‚
â”‚   "msg": "éœ€è¦éªŒè¯"                                              â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬4æ­¥: Load - è·å–éªŒè¯ç æ•°æ®ï¼ˆæ‚¨çš„curlå‘½ä»¤ï¼‰                     â”‚
â”‚                                                                   â”‚
â”‚ GET http://gcaptcha4.geetest.com/load?                          â”‚
â”‚   captcha_id=045e2c229998a88721e32a763bc0f7b8                   â”‚
â”‚   challenge=0f8e5ee2-15cd-433c-bff2-f58808a881f3                â”‚
â”‚   client_type=android                                            â”‚
â”‚   lang=zh-cn                                                     â”‚
â”‚   (ä¸éœ€è¦callbackå‚æ•°ï¼)                                         â”‚
â”‚                                                                   â”‚
â”‚ è¿”å›:                                                             â”‚
â”‚ {                                                                 â”‚
â”‚   "status": "success",                                           â”‚
â”‚   "data": {                                                      â”‚
â”‚     "lot_number": "eb6e3c4b...",  â† æ‰¹æ¬¡å·                       â”‚
â”‚     "imgs": "captcha_v4/.../xxx.jpg",  â† ä¹å®«æ ¼å›¾ç‰‡è·¯å¾„          â”‚
â”‚     "ques": ["nerualpic/.../xxx.png"],  â† é—®é¢˜å›¾ç‰‡è·¯å¾„           â”‚
â”‚     "pow_detail": {...},  â† Wå‚æ•°ç”Ÿæˆæ‰€éœ€                        â”‚
â”‚     "payload": "...",  â† è½½è·                                    â”‚
â”‚     "process_token": "..."  â† å¤„ç†ä»¤ç‰Œ                           â”‚
â”‚   }                                                               â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬5æ­¥: è¯†åˆ«ä¹å®«æ ¼ï¼ˆä¸¤ç§æ–¹å¼ï¼‰                                    â”‚
â”‚                                                                   â”‚
â”‚ æ–¹å¼A: æœ¬åœ°è¯†åˆ«                                                   â”‚
â”‚   - ä¸‹è½½é—®é¢˜å›¾ç‰‡å’Œä¹å®«æ ¼å›¾ç‰‡                                      â”‚
â”‚   - ä½¿ç”¨ONNXæ¨¡å‹è¯†åˆ«                                             â”‚
â”‚   - è¿”å›: [2, 5, 7]                                              â”‚
â”‚                                                                   â”‚
â”‚ æ–¹å¼B: è¿œç¨‹AIè¯†åˆ«ï¼ˆæ¨èï¼‰                                         â”‚
â”‚   - å‘é€captcha_idåˆ°AIæœåŠ¡å™¨                                     â”‚
â”‚   - AIæœåŠ¡å™¨è‡ªåŠ¨è·å–å›¾ç‰‡å¹¶è¯†åˆ«                                    â”‚
â”‚   - è¿”å›: [2, 5, 7]                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬6æ­¥: ç”ŸæˆWå‚æ•°ï¼ˆæœ¬åœ°åŠ å¯†ï¼‰                                     â”‚
â”‚                                                                   â”‚
â”‚ è¾“å…¥:                                                             â”‚
â”‚   - lot_number: "eb6e3c4b..."                                    â”‚
â”‚   - captcha_id: "045e2c229998a88721e32a763bc0f7b8"              â”‚
â”‚   - pic_index: "2,5,7"  â† è¯†åˆ«ç»“æœ                              â”‚
â”‚   - pow_detail: {...}                                            â”‚
â”‚                                                                   â”‚
â”‚ è¾“å‡º:                                                             â”‚
â”‚   - w_param: "6d9cd699ee20da6aec146ed8a0d2f8a8..."              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬7æ­¥: Verify - éªŒè¯Wå‚æ•°                                        â”‚
â”‚                                                                   â”‚
â”‚ GET http://gcaptcha4.geetest.com/verify?                        â”‚
â”‚   captcha_id=045e2c229998a88721e32a763bc0f7b8                   â”‚
â”‚   client_type=android                                            â”‚
â”‚   lot_number=eb6e3c4b...                                         â”‚
â”‚   payload=...                                                    â”‚
â”‚   process_token=...                                              â”‚
â”‚   w=6d9cd699ee20da6aec146ed8a0d2f8a8...  â† Wå‚æ•°                â”‚
â”‚                                                                   â”‚
â”‚ è¿”å›:                                                             â”‚
â”‚ {                                                                 â”‚
â”‚   "status": "success",                                           â”‚
â”‚   "data": {                                                      â”‚
â”‚     "result": "success",                                         â”‚
â”‚     "seccode": {                                                 â”‚
â”‚       "pass_token": "aee8a9949ae5982b...",  â† é€šè¡Œä»¤ç‰Œ           â”‚
â”‚       "gen_time": "1762711314",  â† ç”Ÿæˆæ—¶é—´                      â”‚
â”‚       "captcha_output": "6d9cd699ee20da6aec..."  â† Wå‚æ•°         â”‚
â”‚     }                                                             â”‚
â”‚   }                                                               â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬8æ­¥: æ„å»ºgeeDtoï¼ˆéªŒè¯ç»“æœï¼‰                                    â”‚
â”‚                                                                   â”‚
â”‚ geeDto = {                                                       â”‚
â”‚   "lotNumber": "eb6e3c4b...",                                    â”‚
â”‚   "captchaOutput": "6d9cd699ee20da6aec...",  â† Wå‚æ•°            â”‚
â”‚   "passToken": "aee8a9949ae5982b...",  â† é€šè¡Œä»¤ç‰Œ               â”‚
â”‚   "genTime": "1762711314",  â† ç”Ÿæˆæ—¶é—´                          â”‚
â”‚   "captchaId": "045e2c229998a88721e32a763bc0f7b8",              â”‚
â”‚   "captchaKeyType": "dlVerify"                                   â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬9æ­¥: é‡æ–°å‘é€æŠ¢å•è¯·æ±‚ï¼ˆå¸¦éªŒè¯ï¼‰                                â”‚
â”‚                                                                   â”‚
â”‚ POST /gate/app-api/club/order/grabAnOrder/v1                    â”‚
â”‚ {                                                                 â”‚
â”‚   "orderId": "3308987",                                          â”‚
â”‚   "geeDto": {  â† æºå¸¦éªŒè¯ç»“æœ                                    â”‚
â”‚     "lotNumber": "eb6e3c4b...",                                  â”‚
â”‚     "captchaOutput": "6d9cd699ee20da6aec...",                   â”‚
â”‚     "passToken": "aee8a9949ae5982b...",                         â”‚
â”‚     "genTime": "1762711314",                                     â”‚
â”‚     "captchaId": "045e2c229998a88721e32a763bc0f7b8",            â”‚
â”‚     "captchaKeyType": "dlVerify"                                 â”‚
â”‚   }                                                               â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¬¬10æ­¥: æœåŠ¡å™¨éªŒè¯å¹¶è¿”å›ç»“æœ                                     â”‚
â”‚                                                                   â”‚
â”‚ {                                                                 â”‚
â”‚   "code": 0,  â† æˆåŠŸ                                            â”‚
â”‚   "msg": "æŠ¢å•æˆåŠŸ"                                              â”‚
â”‚ }                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”‘ å…³é”®ç‚¹è§£é‡Š

### 1. callbackå‚æ•°

```bash
# æµè§ˆå™¨JSONPè¯·æ±‚ï¼ˆéœ€è¦callbackï¼‰
http://gcaptcha4.geetest.com/load?callback=geetest_1762710939565&...

# è¿”å›ï¼ˆJSONPæ ¼å¼ï¼‰
geetest_1762710939565({"status":"success",...})

# ===================================================

# APPç›´æ¥è¯·æ±‚ï¼ˆä¸éœ€è¦callbackï¼‰
http://gcaptcha4.geetest.com/load?captcha_id=...&challenge=...

# è¿”å›ï¼ˆçº¯JSONæˆ–å¸¦æ‹¬å·ï¼‰
({"status":"success",...})  æˆ–  {"status":"success",...}

# ä»£ç å¤„ç†ï¼ˆå»æ‰æ‹¬å·ï¼‰
if text.startswith('(') and text.endswith(')'):
    text = text[1:-1]
```

### 2. éªŒè¯ç»“æœå¦‚ä½•æºå¸¦

**æ ¸å¿ƒï¼šgeeDtoå¯¹è±¡**

```python
# ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼ˆå¤±è´¥ï¼Œéœ€è¦éªŒè¯ï¼‰
{
  "orderId": "3308987"
}
# è¿”å›: {"code": 1001, "msg": "éœ€è¦éªŒè¯"}

# ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆæºå¸¦éªŒè¯ç»“æœï¼‰
{
  "orderId": "3308987",
  "geeDto": {  # â† è¿™å°±æ˜¯éªŒè¯ç»“æœï¼
    "lotNumber": "...",      # ä»loadè·å–
    "captchaOutput": "...",  # Wå‚æ•°ï¼ˆverifyè¿”å›ï¼‰
    "passToken": "...",      # verifyè¿”å›
    "genTime": "...",        # verifyè¿”å›
    "captchaId": "045e2c229998a88721e32a763bc0f7b8",
    "captchaKeyType": "dlVerify"
  }
}
# è¿”å›: {"code": 0, "msg": "æŠ¢å•æˆåŠŸ"}
```

### 3. æ‚¨çš„ä»£ç å®ç°

```python
# libs/geetest_helper_local.py - verify()æ–¹æ³•
def verify(self, challenge=None):
    # æ­¥éª¤1: Loadï¼ˆè·å–éªŒè¯ç æ•°æ®ï¼‰
    load_response = requests.get(
        "http://gcaptcha4.geetest.com/load",
        params={
            'captcha_id': self.captcha_id,
            'challenge': challenge,
            'client_type': 'android',
            'lang': 'zh-cn',
            # æ³¨æ„ï¼šæ²¡æœ‰callbackå‚æ•°ï¼
        }
    )
    
    # æ­¥éª¤2: è¯†åˆ«ä¹å®«æ ¼
    answers = self.recognize(question_url, grid_url)
    
    # æ­¥éª¤3: ç”ŸæˆWå‚æ•°
    w_param = self.w_generator.generate_w(
        lot_number=lot_number,
        captcha_id=self.captcha_id,
        pic_index=",".join(map(str, answers))
    )
    
    # æ­¥éª¤4: Verifyï¼ˆéªŒè¯Wå‚æ•°ï¼‰
    verify_response = requests.get(
        "http://gcaptcha4.geetest.com/verify",
        params={
            'captcha_id': self.captcha_id,
            'lot_number': lot_number,
            'w': w_param,  # â† å…³é”®ï¼
            'payload': payload,
            'process_token': process_token
        }
    )
    
    # æ­¥éª¤5: è¿”å›éªŒè¯ç»“æœ
    return {
        'success': True,
        'lot_number': lot_number,
        'captcha_output': w_param,  # â† è¿™ä¸ªä¼šæ”¾åˆ°geeDtoä¸­
        'pass_token': pass_token,   # â† è¿™ä¸ªä¼šæ”¾åˆ°geeDtoä¸­
        'gen_time': gen_time,       # â† è¿™ä¸ªä¼šæ”¾åˆ°geeDtoä¸­
        'answers': answers
    }
```

```python
# src/fast_grab_service.py - æŠ¢å•é€»è¾‘
def _grab_order_fast(self, order):
    # ç¬¬ä¸€æ¬¡å°è¯•ï¼ˆä¸å¸¦éªŒè¯ï¼‰
    response = self.session.post(url, json={'orderId': order_id})
    result = response.json()
    
    if result.get('code') == 1001:
        # éœ€è¦éªŒè¯ï¼è°ƒç”¨Geetest
        geetest_result = self.geetest_helper.verify()
        
        # æ„å»ºgeeDto
        gee_dto = {
            'lotNumber': geetest_result['lot_number'],
            'captchaOutput': geetest_result['captcha_output'],
            'passToken': geetest_result['pass_token'],
            'genTime': str(geetest_result['gen_time']),
            'captchaId': '045e2c229998a88721e32a763bc0f7b8',
            'captchaKeyType': 'dlVerify'
        }
        
        # ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆå¸¦éªŒè¯ï¼‰
        payload = {
            'orderId': order_id,
            'geeDto': gee_dto  # â† æºå¸¦éªŒè¯ç»“æœï¼
        }
        
        response = self.session.post(url, json=payload)
        # æˆåŠŸï¼
```

## âœ… æ€»ç»“

### æ‚¨çš„å®ç°æ˜¯æ­£ç¡®çš„ï¼

1. **callbackä¸éœ€è¦** - APPç›´æ¥HTTPè¯·æ±‚ï¼Œä¸éœ€è¦JSONP
2. **éªŒè¯ç»“æœé€šè¿‡geeDtoæºå¸¦** - åŒ…å«æ‰€æœ‰éªŒè¯ä¿¡æ¯
3. **æµç¨‹å®Œæ•´** - Load â†’ è¯†åˆ« â†’ ç”ŸæˆW â†’ Verify â†’ æŠ¢å•

### å…³é”®æ•°æ®æµ

```
Loadè¿”å› â†’ lot_number, imgs, ques, pow_detail, payload, process_token
    â†“
è¯†åˆ«è¿”å› â†’ answers: [2, 5, 7]
    â†“
ç”ŸæˆW â†’ w_param (ä½¿ç”¨lot_number + answers + pow_detail)
    â†“
Verifyè¿”å› â†’ pass_token, gen_time, captcha_output
    â†“
æ„å»ºgeeDto â†’ {lotNumber, captchaOutput, passToken, genTime, ...}
    â†“
æŠ¢å•è¯·æ±‚ â†’ {orderId, geeDto}
    â†“
æˆåŠŸï¼
```

### æµ‹è¯•å»ºè®®

```bash
# 1. æµ‹è¯•Loadï¼ˆä¸éœ€è¦callbackï¼‰
curl "http://gcaptcha4.geetest.com/load?captcha_id=045e2c229998a88721e32a763bc0f7b8&challenge=test&client_type=android&lang=zh-cn"

# 2. æµ‹è¯•å®Œæ•´æµç¨‹
export AI_SERVER_URL=http://127.0.0.1:8889
python3 test_geetest_remote.py

# 3. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
# ä¼šæ˜¾ç¤ºæ¯ä¸€æ­¥çš„æ•°æ®
```
