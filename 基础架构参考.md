# åŸºç¡€æ¶æ„å‚è€ƒæŒ‡å—

## ğŸ¯ é¡¹ç›®éœ€æ±‚

- âœ… Androidè¿è¡ŒVPNæœåŠ¡
- âœ… å®æ—¶æ›´æ–°tokenã€useridã€clubid
- âœ… ç›‘æ§è®¢å•åˆ—è¡¨
- âœ… è‡ªåŠ¨æŠ¢å•åŠŸèƒ½

## ğŸ“š æ¨èçš„GitHubé¡¹ç›®å‚è€ƒ

### 1. Kivy AndroidåŸºç¡€æ¨¡æ¿

#### **KivyMD Example App**
- **GitHub**: `https://github.com/kivymd/KivyMD/tree/master/demos`
- **æè¿°**: å®Œæ•´çš„KivyMDç¤ºä¾‹åº”ç”¨ï¼ŒåŒ…å«å„ç§UIç»„ä»¶
- **é€‚ç”¨åœºæ™¯**: UIç•Œé¢å‚è€ƒ

#### **Buildozer Android Example**
- **GitHub**: `https://github.com/kivy/buildozer`
- **æè¿°**: Buildozerå®˜æ–¹ç¤ºä¾‹å’Œæ–‡æ¡£
- **é€‚ç”¨åœºæ™¯**: Androidæ‰“åŒ…å‚è€ƒ

#### **Python-for-Android Examples**
- **GitHub**: `https://github.com/kivy/python-for-android/tree/develop/examples`
- **æè¿°**: Python-for-Androidå®˜æ–¹ç¤ºä¾‹
- **é€‚ç”¨åœºæ™¯**: AndroidåŠŸèƒ½é›†æˆå‚è€ƒ

### 2. Android VPNæœåŠ¡å‚è€ƒ

#### **Android VpnServiceå®˜æ–¹æ–‡æ¡£**
- **é“¾æ¥**: `https://developer.android.com/reference/android/net/VpnService`
- **æè¿°**: Androidå®˜æ–¹VPNæœåŠ¡APIæ–‡æ¡£
- **é€‚ç”¨åœºæ™¯**: VPNæœåŠ¡å®ç°å‚è€ƒ

#### **PacketCapture (Python)**
- **GitHub**: `https://github.com/pynetwork/pypcap` (éœ€è¦Androidé€‚é…)
- **æè¿°**: Pythonç½‘ç»œåŒ…æ•è·åº“
- **é€‚ç”¨åœºæ™¯**: ç½‘ç»œåŒ…æ•è·å‚è€ƒï¼ˆéœ€è¦Androidé€‚é…ï¼‰

### 3. å®Œæ•´é¡¹ç›®æ¶æ„å‚è€ƒ

#### **Kivy Android App Template**
åˆ›å»ºä¸€ä¸ªåŸºç¡€æ¨¡æ¿ç»“æ„ï¼š

```
project_name/
â”œâ”€â”€ main.py                 # åº”ç”¨å…¥å£
â”œâ”€â”€ buildozer.spec          # Buildozeré…ç½®
â”œâ”€â”€ requirements.txt        # Pythonä¾èµ–
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ vpn_service.py      # VPNæœåŠ¡ï¼ˆä½¿ç”¨pyjniusè°ƒç”¨Android VpnServiceï¼‰
â”‚   â”œâ”€â”€ grab_service.py     # æŠ¢å•æœåŠ¡
â”‚   â”œâ”€â”€ config_manager.py   # é…ç½®ç®¡ç†
â”‚   â””â”€â”€ api_client.py       # APIå®¢æˆ·ç«¯
â”œâ”€â”€ libs/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ geetest_helper.py   # Geetestè¯†åˆ«
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ fonts/              # å­—ä½“æ–‡ä»¶
â””â”€â”€ .github/
    â””â”€â”€ workflows/
        â””â”€â”€ build-apk.yml   # CI/CDæ„å»º
```

## ğŸ—ï¸ å½“å‰é¡¹ç›®æ¶æ„

æ‚¨çš„é¡¹ç›®å·²ç»æœ‰å¾ˆå¥½çš„åŸºç¡€æ¶æ„ï¼š

```
GrabOrderApp/
â”œâ”€â”€ main.py                    # âœ… Kivyåº”ç”¨ä¸»å…¥å£
â”œâ”€â”€ buildozer.spec            # âœ… Buildozeré…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ vpn_service.py        # âœ… VPNæŠ“åŒ…æœåŠ¡ï¼ˆä½¿ç”¨pyjniusï¼‰
â”‚   â”œâ”€â”€ grab_service.py       # âœ… æŠ¢å•æœåŠ¡
â”‚   â””â”€â”€ config_manager.py     # âœ… é…ç½®ç®¡ç†
â”œâ”€â”€ libs/
â”‚   â”œâ”€â”€ geetest_helper_local.py  # âœ… Geetestè¯†åˆ«
â”‚   â””â”€â”€ android_w_generator.py   # âœ… Wå‚æ•°ç”Ÿæˆ
â””â”€â”€ fonts/
    â””â”€â”€ DroidSansFallback.ttf    # âœ… ä¸­æ–‡å­—ä½“
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½å®ç°å‚è€ƒ

### 1. VPNæœåŠ¡å®ç°

**å‚è€ƒä»£ç ç»“æ„**ï¼š
```python
# src/vpn_service.py
from jnius import autoclass, PythonJavaClass, java_method

class VPNTokenCapture:
    """VPNæŠ“åŒ…æœåŠ¡"""
    
    def __init__(self):
        self.VpnService = autoclass('android.net.VpnService')
        self.Builder = autoclass('android.net.VpnService$Builder')
        self.ParcelFileDescriptor = autoclass('android.os.ParcelFileDescriptor')
        
    def start_vpn(self):
        """å¯åŠ¨VPNæœåŠ¡"""
        # 1. è¯·æ±‚VPNæƒé™
        # 2. åˆ›å»ºVPNæ¥å£
        # 3. é…ç½®è·¯ç”±
        # 4. å¼€å§‹æŠ“åŒ…
        pass
    
    def capture_packets(self):
        """æ•è·ç½‘ç»œåŒ…"""
        # 1. è¯»å–åŸå§‹æ•°æ®åŒ…
        # 2. è§£æHTTP/HTTPS
        # 3. æå–token
        # 4. æ›´æ–°é…ç½®
        pass
```

### 2. Tokenå®æ—¶æ›´æ–°

**å‚è€ƒå®ç°**ï¼š
```python
# src/config_manager.py
import json
import threading
from kivy.clock import Clock

class ConfigManager:
    """é…ç½®ç®¡ç†å™¨"""
    
    def __init__(self):
        self.token = None
        self.userid = None
        self.clubid = None
        self._lock = threading.Lock()
    
    def update_token(self, token, userid=None, clubid=None):
        """æ›´æ–°tokenå’Œç”¨æˆ·ä¿¡æ¯"""
        with self._lock:
            self.token = token
            if userid:
                self.userid = userid
            if clubid:
                self.clubid = clubid
            self.save_config()
    
    def save_config(self):
        """ä¿å­˜é…ç½®åˆ°æ–‡ä»¶"""
        config = {
            'token': self.token,
            'userid': self.userid,
            'clubid': self.clubid
        }
        # ä¿å­˜åˆ°æ–‡ä»¶
        pass
```

### 3. è®¢å•ç›‘æ§å’ŒæŠ¢å•

**å‚è€ƒå®ç°**ï¼š
```python
# src/grab_service.py
import threading
import requests
from kivy.clock import Clock

class GrabOrderService:
    """æŠ¢å•æœåŠ¡"""
    
    def __init__(self, config_manager):
        self.config_mgr = config_manager
        self.is_running = False
        self.monitor_thread = None
    
    def start_monitoring(self):
        """å¼€å§‹ç›‘æ§è®¢å•"""
        self.is_running = True
        self.monitor_thread = threading.Thread(target=self._monitor_orders)
        self.monitor_thread.start()
    
    def _monitor_orders(self):
        """ç›‘æ§è®¢å•åˆ—è¡¨"""
        while self.is_running:
            try:
                # 1. è·å–è®¢å•åˆ—è¡¨
                orders = self.get_order_list()
                
                # 2. ç­›é€‰ç¬¦åˆæ¡ä»¶çš„è®¢å•
                target_orders = self.filter_orders(orders)
                
                # 3. æŠ¢å•
                for order in target_orders:
                    self.grab_order(order)
                
                # 4. ç­‰å¾…é—´éš”
                time.sleep(1)  # 1ç§’æ£€æŸ¥ä¸€æ¬¡
            except Exception as e:
                log_print(f"ç›‘æ§è®¢å•å‡ºé”™: {e}")
    
    def get_order_list(self):
        """è·å–è®¢å•åˆ—è¡¨"""
        headers = {
            'Authorization': f'Bearer {self.config_mgr.token}',
            'User-Id': self.config_mgr.userid,
            'Club-Id': self.config_mgr.clubid
        }
        response = requests.get('https://api.example.com/orders', headers=headers)
        return response.json()
    
    def grab_order(self, order):
        """æŠ¢å•"""
        headers = {
            'Authorization': f'Bearer {self.config_mgr.token}',
            'User-Id': self.config_mgr.userid,
            'Club-Id': self.config_mgr.clubid
        }
        response = requests.post(
            f'https://api.example.com/orders/{order["id"]}/grab',
            headers=headers
        )
        return response.json()
```

## ğŸ“– æ¨èçš„GitHubé¡¹ç›®

### å¯ä»¥ç›´æ¥Forkçš„é¡¹ç›®

1. **KivyMD Kitchen Sink**
   - GitHub: `https://github.com/kivymd/KivyMD/tree/master/demos/kitchen_sink`
   - æè¿°: å®Œæ•´çš„KivyMD UIç»„ä»¶ç¤ºä¾‹
   - é€‚ç”¨: UIç•Œé¢å‚è€ƒ

2. **Kivy Android Camera Example**
   - æœç´¢: `kivy android camera example github`
   - é€‚ç”¨: Androidæƒé™å’ŒåŠŸèƒ½é›†æˆå‚è€ƒ

3. **Python-for-Android Recipes**
   - GitHub: `https://github.com/kivy/python-for-android/tree/develop/pythonforandroid/recipes`
   - æè¿°: å„ç§Pythonåº“çš„Androidé€‚é…
   - é€‚ç”¨: ä¾èµ–åº“é›†æˆå‚è€ƒ

### å¯ä»¥å‚è€ƒçš„æ¶æ„

1. **Clean Architecture for Kivy**
   - ç»“æ„: MVVMæ¨¡å¼
   - é€‚ç”¨: ä»£ç ç»„ç»‡å‚è€ƒ

2. **Kivy Service Example**
   - æœç´¢: `kivy android service example`
   - é€‚ç”¨: åå°æœåŠ¡å‚è€ƒ

## ğŸš€ å¿«é€Ÿå¼€å§‹æ¨¡æ¿

### æœ€å°åŒ–å¯å·¥ä½œæ¨¡æ¿

```python
# main.py
from kivy.app import App
from kivy.uix.boxlayout import BoxLayout
from kivy.uix.button import Button
from kivy.uix.label import Label

class MainScreen(BoxLayout):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self.orientation = 'vertical'
        self.add_widget(Label(text='VPNæŠ¢å•åŠ©æ‰‹'))
        btn = Button(text='å¯åŠ¨VPN')
        btn.bind(on_press=self.start_vpn)
        self.add_widget(btn)
    
    def start_vpn(self, instance):
        # å¯åŠ¨VPN
        pass

class GrabOrderApp(App):
    def build(self):
        return MainScreen()

if __name__ == '__main__':
    GrabOrderApp().run()
```

## ğŸ“ å»ºè®®çš„æ”¹è¿›æ–¹å‘

### 1. ç®€åŒ–å½“å‰é¡¹ç›®

å½“å‰é¡¹ç›®å·²ç»æœ‰äº†å®Œæ•´çš„åŸºç¡€æ¶æ„ï¼Œå»ºè®®ï¼š

1. **ä¿®å¤å½“å‰é—®é¢˜**ï¼š
   - âœ… è§£å†³é»‘å±é—®é¢˜ï¼ˆæ­£åœ¨è°ƒè¯•ä¸­ï¼‰
   - âœ… ä¼˜åŒ–æ—¥å¿—è¾“å‡º
   - âœ… å¢å¼ºé”™è¯¯å¤„ç†

2. **ä¼˜åŒ–ä»£ç ç»“æ„**ï¼š
   - åˆ†ç¦»UIå’Œä¸šåŠ¡é€»è¾‘
   - ä½¿ç”¨MVVMæ¨¡å¼
   - æ·»åŠ å•å…ƒæµ‹è¯•

3. **å¢å¼ºåŠŸèƒ½**ï¼š
   - å®Œå–„VPNæŠ“åŒ…åŠŸèƒ½
   - ä¼˜åŒ–è®¢å•ç›‘æ§ç®—æ³•
   - æ·»åŠ æŠ¢å•ç­–ç•¥é…ç½®

### 2. å¦‚æœè¦é‡æ–°å¼€å§‹

å¦‚æœè¦ä»å¤´å¼€å§‹ï¼Œå»ºè®®ï¼š

1. **ä½¿ç”¨KivyMDæ¨¡æ¿**ï¼š
   ```bash
   git clone https://github.com/kivymd/KivyMD.git
   cd KivyMD/demos
   # å‚è€ƒkitchen_sinkç¤ºä¾‹
   ```

2. **é€æ­¥æ·»åŠ åŠŸèƒ½**ï¼š
   - ç¬¬ä¸€æ­¥ï¼šåŸºç¡€UI
   - ç¬¬äºŒæ­¥ï¼šVPNæœåŠ¡
   - ç¬¬ä¸‰æ­¥ï¼šTokenæŠ“å–
   - ç¬¬å››æ­¥ï¼šè®¢å•ç›‘æ§
   - ç¬¬äº”æ­¥ï¼šæŠ¢å•åŠŸèƒ½

## ğŸ”— æœ‰ç”¨é“¾æ¥

1. **Kivyå®˜æ–¹æ–‡æ¡£**: https://kivy.org/doc/stable/
2. **Buildozeræ–‡æ¡£**: https://buildozer.readthedocs.io/
3. **Python-for-Android**: https://python-for-android.readthedocs.io/
4. **Android VpnServiceæ–‡æ¡£**: https://developer.android.com/reference/android/net/VpnService
5. **PyJNIusæ–‡æ¡£**: https://pyjnius.readthedocs.io/

## ğŸ’¡ å»ºè®®

**æ‚¨çš„å½“å‰é¡¹ç›®å·²ç»æœ‰å¾ˆå¥½çš„åŸºç¡€æ¶æ„**ï¼Œå»ºè®®ï¼š

1. âœ… **ç»§ç»­ä¿®å¤å½“å‰é—®é¢˜**ï¼šé»‘å±é—®é¢˜è§£å†³åï¼Œé¡¹ç›®å°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†
2. âœ… **ä¼˜åŒ–ç°æœ‰ä»£ç **ï¼šé‡æ„ä»£ç ï¼Œæé«˜å¯ç»´æŠ¤æ€§
3. âœ… **å¢å¼ºåŠŸèƒ½**ï¼šé€æ­¥æ·»åŠ æ–°åŠŸèƒ½

**ä¸éœ€è¦é‡æ–°å¼€å§‹**ï¼Œå½“å‰é¡¹ç›®æ¶æ„å·²ç»å¾ˆå®Œå–„äº†ï¼

